<dataConfig>
  <dataSource type="JdbcDataSource" jndiName="ConnectaPresenterDS" name="presenter" />
  <dataSource type="JdbcDataSource" jndiName="ConnectaMapsDS" name="maps" />
  <document>
    <entity name="viewer" dataSource="presenter" pk="PK_VIEWER" transformer="ClobTransformer,DateFormatTransformer,RegexTransformer,TemplateTransformer"
      query="SELECT PK_VIEWER, NM_VIEWER, DS_VIEWER FROM PRESENTER2.TB_VIEWER"
      deltaImportQuery="SELECT PK_VIEWER, NM_VIEWER, DS_VIEWER FROM PRESENTER2.TB_VIEWER WHERE PK_VIEWER='${dih.delta.PK_VIEWER}'"
      deltaQuery="SELECT PK_VIEWER FROM PRESENTER2.TB_VIEWER WHERE DT_LAST_MODIFIED > TO_DATE('${dataimporter.last_index_time}', 'yyyy-mm-dd hh24:mi:ss')">

      <field name="id" column="PK_VIEWER" />
      <field name="name" column="NM_VIEWER" />
      <field name="description" column="DS_VIEWER" />

      <field column="module" template="presenter" />
      <field column="_hibernate_class" template="br.com.cds.connecta.presenter.entity.viewer.Viewer" />
    </entity>

    <entity name="viewer" dataSource="maps" pk="id_viewer" transformer="ClobTransformer,DateFormatTransformer,RegexTransformer,TemplateTransformer"
      query="SELECT id_viewer, nm_viewer FROM MAPS.TB_Layer_Viewer"
      deltaImportQuery="SELECT id_viewer, nm_viewer FROM MAPS.TB_Layer_Viewer WHERE id_viewer='${dih.delta.id_viewer}'"
      deltaQuery="SELECT id_viewer FROM MAPS.TB_Layer_Viewer WHERE DT_LAST_MODIFIED > TO_DATE('${dataimporter.last_index_time}', 'yyyy-mm-dd hh24:mi:ss')">

      <field name="id" column="ID_VIEWER" />
      <field name="name" column="NM_VIEWER" />
      
      <field column="module" template="maps" />
      <field column="_hibernate_class" template="br.com.cds.connecta.maps.entity.LayerViewerEntity" />
    </entity>
  </document>
<!--
<field column="lastModified" name="CREATED_AT" dateTimeFormat="yyyy-MM-dd'T'HH:mm:ss'Z'" />
<field sourceColName="POST_KEYWORDS" column="KEYWORDS" splitBy="\|" />
<field column="POST_CAPTION" name="TITLE" clob="true" />
-->
</dataConfig>
